<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.ico?v=7.3.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.ico?v=7.3.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.3.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.3.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.3.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    }
  };
</script>

  <meta name="description" content="最短路径算法有着广泛的应用，例如可以用在地铁换乘规划上。">
<meta name="keywords" content="数据科学 比特猫 Byte猫">
<meta property="og:type" content="article">
<meta property="og:title" content="用最短路径算法实现地铁换乘规划">
<meta property="og:url" content="https://smallchao.github.io/c/7用最短路径算法实现地铁换乘规划/index.html">
<meta property="og:site_name" content="Byte猫">
<meta property="og:description" content="最短路径算法有着广泛的应用，例如可以用在地铁换乘规划上。">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2020-07-21T11:06:48.152Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="用最短路径算法实现地铁换乘规划">
<meta name="twitter:description" content="最短路径算法有着广泛的应用，例如可以用在地铁换乘规划上。">
  <link rel="canonical" href="https://smallchao.github.io/c/7用最短路径算法实现地铁换乘规划/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>用最短路径算法实现地铁换乘规划 | Byte猫</title>
  <meta name="generator" content="Hexo 3.9.0">
  








  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <div class="container use-motion">
    <div class="headband"></div>
	
	<!--
	<a href="https://github.com/smallchao" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
	-->
	
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Byte猫</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">唤醒数据的价值</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-首页">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-数据结构">
      
    

    <a href="/categories/0A" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>数据结构</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-算法设计">
      
    

    <a href="/categories/0X" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>算法设计</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-基础应用">
      
    

    <a href="/categories/1" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>基础应用</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-数据存储">
      
    

    <a href="/categories/2" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>数据存储</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-数据可视化">
      
    

    <a href="/categories/3" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>数据可视化</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-科学计算">
      
    

    <a href="/categories/4" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>科学计算</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-概率论与数理统计">
      
    

    <a href="/categories/5" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>概率论与数理统计</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-优化理论">
      
    

    <a href="/categories/8" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>优化理论</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-经典机器学习">
      
    

    <a href="/categories/9" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>经典机器学习</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-深度学习">
      
    

    <a href="/categories/a" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>深度学习</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-计算机视觉">
      
    

    <a href="/categories/b" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>计算机视觉</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-图论与复杂网络">
      
    

    <a href="/categories/c" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>图论与复杂网络</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-空间计算">
      
    

    <a href="/categories/d" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>空间计算</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content page-post-detail">
            

  <div id="posts" class="posts-expand">
    

  <article class="post" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://smallchao.github.io/c/7用最短路径算法实现地铁换乘规划/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Victor Wu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Byte猫">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">用最短路径算法实现地铁换乘规划

          
        </h1>

        <div class="post-meta">
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-21 19:06:48" itemprop="dateModified" datetime="2020-07-21T19:06:48+08:00">2020-07-21</time>
              </span>
            
          

          
            <div class="post-description">最短路径算法有着广泛的应用，例如可以用在地铁换乘规划上。</div>
          

        </div>
      </header>

    
    
    
	
    <div class="post-body" itemprop="articleBody">

      
	  
	  
        <p>最短路径算法有着广泛的应用，例如可以用在地铁换乘规划上。</p><h2 id="构建地铁图"><a href="#构建地铁图" class="headerlink" title="构建地铁图"></a>构建地铁图</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">line1 = <span class="string">"苹果园 古城路 八角游乐园 八宝山 玉泉路 五棵松 万寿路 公主坟 军事博物馆 木樨地 南礼士路 复兴门 西单 天安门西 天安门东 王府井 东单 建国门 永安里 国贸 大望路 四惠 四惠东"</span></span><br><span class="line">line2 = <span class="string">"西直门 车公庄 阜成门 复兴门 长椿街 宣武门 和平门 前门 崇文门 北京站 建国门 朝阳门 东四十条 东直门 雍和宫 安定门 鼓楼大街 积水潭"</span></span><br><span class="line">line4 = <span class="string">"天宫院 生物医药基地 义和庄 黄村火车站 黄村西大街 清源路 枣园 高米店南 高米店北 西红门 新宫 公益西桥 角门西 马家堡 北京南站 陶然亭 菜市口 宣武门 西单 灵境胡同 西四 平安里 新街口 西直门 动物园 国家图书馆 魏公村 人民大学 海淀黄庄 中关村 北京大学东门 圆明园 西苑 北宫门 安河桥北"</span></span><br><span class="line">line5 = <span class="string">"宋家庄 刘家窑 蒲黄榆 天坛东门 磁器口 崇文门 东单 灯市口 东四 张自忠路 北新桥 雍和宫 和平里北街 和平西桥 惠新西街南口 惠新西街北口 大屯桥东 北苑路北 立水桥南 立水桥 天通苑南 天通苑 天通苑北"</span></span><br><span class="line">line6 = <span class="string">"海淀五路居 慈寿寺 白石桥南 车公庄西 车公庄 平安里 北海北 南锣鼓巷 东四 朝阳门 东大桥 呼家楼 金台路 十里堡 青年路 褡裢坡 黄渠 常营 草房 物资学院路 通州北关 通运门 北运河西 北运河东 郝家府 东夏园 潞城"</span></span><br><span class="line">line8 = <span class="string">"朱辛庄 育知路 平西府 回龙观东大街 霍营 育新 西小口 永泰庄 林萃桥 森林公园南门 奥林匹克公园 奥体中心 北土城 安华桥 鼓楼大街 什刹海 南锣鼓巷"</span></span><br><span class="line">line9 = <span class="string">"国家图书馆 白石桥南 白堆子 军事博物馆 北京西站 六里桥东 六里桥 七里庄 丰台东大街 丰台南路 科怡路 丰台科技园 郭公庄"</span></span><br><span class="line">line10 = <span class="string">"劲松 双井 国贸 金台夕照 呼家楼 团结湖 农业展览馆 亮马桥 三元桥 太阳宫 芍药居 惠新西街南口 安贞门 北土城 健德门 牡丹园 西土城 知春路 知春里 海淀黄庄 苏州街 巴沟 火器营 长春桥 车道沟 慈寿寺 西钓鱼台 公主坟 莲花桥 六里桥 西局 泥洼 丰台站 首经贸 纪家庙 草桥 角门西 角门东 大红门 石榴庄 宋家庄 成寿寺 分钟寺 十里河 潘家园"</span></span><br><span class="line">line13 = <span class="string">"西直门 大钟寺 知春路 五道口 上地 西二旗 龙泽 回龙观 霍营 立水桥 北苑 望京西 芍药居 光熙门 柳芳 东直门"</span></span><br><span class="line">line14 = <span class="string">"张郭庄 园博园 大瓦窑 郭庄子 打井 七里庄 西局"</span></span><br><span class="line">line15 = <span class="string">"俸伯 顺义 石门 南法信 后沙峪 花梨坎 国展 孙河 马泉营 崔各庄望京 望京西"</span></span><br><span class="line">YiZhuangLine = <span class="string">"宋家庄 肖村 小红门 旧宫 亦庄桥 亦庄文化园 万源街 荣京东街 荣昌东街 同济南路 经海路 次渠南 次渠"</span></span><br><span class="line">FangShanLine = <span class="string">"郭公庄 大葆台 稻田 长阳 篱笆房 广阳城 良乡大学城北 良乡大学城 良乡大学城西 良乡南关 苏庄"</span></span><br><span class="line">ChangPingLine = <span class="string">"西二旗 生命科学园 朱辛庄 巩华城 沙河 沙河高教园 南邵"</span></span><br><span class="line">BaTongLine = <span class="string">"四惠 四惠东 高碑店 中国传媒大学 双桥 管庄 八里桥 通州北苑 果园 九棵树 梨园 临河里 土桥"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">build_subway</span><span class="params">(lines, lines_name)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    构建地铁图</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    n = len(lines)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">        line = lines[i]</span><br><span class="line">        lines[i] = line.split()</span><br><span class="line">    stations = set()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">        stations.update(set(lines[i]))</span><br><span class="line">    system = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> station <span class="keyword">in</span> stations:</span><br><span class="line">        next_station = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">if</span> station <span class="keyword">in</span> lines[i]:</span><br><span class="line">                line = lines[i]</span><br><span class="line">                idx = line.index(station)</span><br><span class="line">                <span class="keyword">if</span> idx == <span class="number">0</span>:</span><br><span class="line">                    next_station[line[<span class="number">1</span>]] = lines_name[i]</span><br><span class="line">                <span class="keyword">elif</span> idx == len(line)<span class="number">-1</span>:</span><br><span class="line">                    next_station[line[idx<span class="number">-1</span>]] = lines_name[i]</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    next_station[line[idx<span class="number">-1</span>]] = lines_name[i]</span><br><span class="line">                    next_station[line[idx+<span class="number">1</span>]] = lines_name[i]</span><br><span class="line">        system[station] = next_station</span><br><span class="line">    <span class="keyword">return</span> system</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update_subway</span><span class="params">(BeiJingSubway)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    考虑换线情况</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    BeiJingSubway[<span class="string">'西直门'</span>][<span class="string">'积水潭'</span>] = <span class="string">'line2'</span></span><br><span class="line">    BeiJingSubway[<span class="string">'积水潭'</span>][<span class="string">'西直门'</span>] = <span class="string">'line2'</span></span><br><span class="line">    BeiJingSubway[<span class="string">'劲松'</span>][<span class="string">'潘家园'</span>] = <span class="string">'line10'</span></span><br><span class="line">    BeiJingSubway[<span class="string">'潘家园'</span>][<span class="string">'劲松'</span>] = <span class="string">'line10'</span></span><br><span class="line">    <span class="keyword">return</span> BeiJingSubway</span><br><span class="line"></span><br><span class="line">lines = [line1, line2, line4, line5, line6, line8, line9, line10, line13, line14, line15, YiZhuangLine, FangShanLine, ChangPingLine, BaTongLine]</span><br><span class="line">lines_name = [<span class="string">'line1'</span>, <span class="string">'line2'</span>, <span class="string">'line4'</span>, <span class="string">'line5'</span>, <span class="string">'line6'</span>, <span class="string">'line8'</span>, <span class="string">'line9'</span>, <span class="string">'line10'</span>, <span class="string">'line13'</span>, <span class="string">'line14'</span>, <span class="string">'line15'</span>, <span class="string">'YiZhuangLine'</span>, <span class="string">'FangShanLine'</span>, <span class="string">'ChangPingLine'</span>, <span class="string">'BaTongLine'</span>]</span><br><span class="line">bj_subway = build_subway(lines, lines_name)</span><br><span class="line">bj_subway = update_subway(bj_subway)</span><br><span class="line">print(bj_subway)</span><br></pre></td></tr></table></figure><a id="more"></a>


<h2 id="最短路径"><a href="#最短路径" class="headerlink" title="最短路径"></a>最短路径</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">find_path</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, system)</span>:</span></span><br><span class="line">        self.system = system</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">shorter_path</span><span class="params">(self, start, goal)</span>:</span>  <span class="comment"># 最短路径</span></span><br><span class="line">        <span class="keyword">if</span> start == goal:</span><br><span class="line">            <span class="keyword">return</span> [start]</span><br><span class="line">        explored = set() </span><br><span class="line">        quene = [[start]] </span><br><span class="line">        <span class="keyword">while</span> quene:</span><br><span class="line">            path = quene.pop(<span class="number">0</span>)</span><br><span class="line">            s = path[<span class="number">-1</span>]</span><br><span class="line">            <span class="keyword">for</span> state, action <span class="keyword">in</span> self.system[s].items():</span><br><span class="line">                <span class="keyword">if</span> state <span class="keyword">not</span> <span class="keyword">in</span> explored:</span><br><span class="line">                    explored.add(state)</span><br><span class="line">                    path2 = path + [action, state]</span><br><span class="line">                    <span class="keyword">if</span> state == goal:</span><br><span class="line">                        <span class="keyword">return</span> path2</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        quene.append(path2)</span><br><span class="line">        <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">path_search</span><span class="params">(self, start, goal)</span>:</span>  <span class="comment"># 最小换乘次数</span></span><br><span class="line">        <span class="keyword">if</span> start == goal:</span><br><span class="line">            <span class="keyword">return</span> [start]</span><br><span class="line">        explored = set() </span><br><span class="line">        queue = [ [start, (<span class="string">''</span>, <span class="number">0</span>)] ]</span><br><span class="line">        <span class="keyword">while</span> queue:</span><br><span class="line">            path = queue.pop(<span class="number">0</span>)</span><br><span class="line">            s = path[<span class="number">-2</span>]</span><br><span class="line">            linenum, changetimes = path[<span class="number">-1</span>]</span><br><span class="line">            <span class="keyword">if</span> s == goal:</span><br><span class="line">                <span class="keyword">return</span> path</span><br><span class="line">            <span class="keyword">for</span> state, action <span class="keyword">in</span> self.system[s].items():</span><br><span class="line">                <span class="keyword">if</span> state <span class="keyword">not</span> <span class="keyword">in</span> explored:</span><br><span class="line">                    linechange = changetimes</span><br><span class="line">                    explored.add(state)</span><br><span class="line">                    <span class="keyword">if</span> linenum != action:</span><br><span class="line">                        linechange += <span class="number">1</span></span><br><span class="line">                    path2 = path[:<span class="number">-1</span>] + [action, state, (action, linechange)]</span><br><span class="line">                    queue.append(path2)</span><br><span class="line">                    queue.sort(key=<span class="keyword">lambda</span> path:path[<span class="number">-1</span>][<span class="number">-1</span>])</span><br><span class="line">        <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(self, here, there)</span>:</span></span><br><span class="line">        min_change_path = self.path_search(here, there)[::<span class="number">2</span>]</span><br><span class="line">        short_path = self.shorter_path(here, there)[::<span class="number">2</span>]</span><br><span class="line">        <span class="keyword">if</span> len(min_change_path) &lt;= len(short_path):</span><br><span class="line">            <span class="keyword">for</span> ele <span class="keyword">in</span> min_change_path:</span><br><span class="line">                print(ele)</span><br><span class="line">            print(len(min_change_path))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">for</span> ele <span class="keyword">in</span> short_path:</span><br><span class="line">                print(ele)</span><br><span class="line">            print(len(short_path))</span><br><span class="line"></span><br><span class="line">p = find_path(bj_subway)</span><br><span class="line">p.main(<span class="string">'角门西'</span>, <span class="string">'国家图书馆'</span>)</span><br></pre></td></tr></table></figure>
    </div>
	

    
    
    
        
      

      <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/c/6图算法之最短路径/" rel="next" title="图算法之最短路径">
                  <i class="fa fa-chevron-left"></i> 图算法之最短路径
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/c/8图算法之中心性/" rel="prev" title="图算法之中心性">
                  图算法之中心性 <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

	
      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc" data-target="post-toc-wrap">
          文章目录
        </li>
        <li class="sidebar-nav-overview" data-target="site-overview-wrap">
          站点概览
        </li>
      </ul>
	 

      <!--noindex-->
	  
      <div class="post-toc-wrap sidebar-panel">
		<!--
		-->
      </div>
	  
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/images/avatar.png"
      alt="Victor Wu">
  <p class="site-author-name" itemprop="name">Victor Wu</p>
  <div class="site-description motion-element" itemprop="description"></div>
</div>
	
  <nav class="site-state motion-element">
  <!--
      <div class="site-state-item site-state-posts">
        
          <a href="/archives">
        
          <span class="site-state-item-count">234</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
	-->
  </nav>



        </div>
      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Victor Wu</span>
</div>

        












        
      </div>
    </footer>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  </div>

  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.3.0"></script><script src="/js/motion.js?v=7.3.0"></script>
<script src="/js/schemes/pisces.js?v=7.3.0"></script>

<script src="/js/next-boot.js?v=7.3.0"></script>



  





















  

  

  

  


  
  <script src="/js/post-details.js?v=7.3.0"></script>


</body>
</html>
