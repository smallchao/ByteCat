<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.ico?v=7.3.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.ico?v=7.3.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.3.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.3.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.3.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    }
  };
</script>

  <meta name="description" content="图像分析中，图像质量的好坏直接影响识别算法的设计与效果的精度，因此在图像分析（特征提取、分割、匹配和识别等）前，需要进行预处理。图像预处理的主要目的是消除图像中无关的信息，恢复有用的真实信息，增强有关信息的可检测性、最大限度地简化数据，从而改进特征提取、图像分割、匹配和识别的可靠性。">
<meta name="keywords" content="数据科学 比特猫 Byte猫">
<meta property="og:type" content="article">
<meta property="og:title" content="图像预处理流程和方法">
<meta property="og:url" content="https://smallchao.github.io/11/8图像预处理流程与方法/index.html">
<meta property="og:site_name" content="Byte猫">
<meta property="og:description" content="图像分析中，图像质量的好坏直接影响识别算法的设计与效果的精度，因此在图像分析（特征提取、分割、匹配和识别等）前，需要进行预处理。图像预处理的主要目的是消除图像中无关的信息，恢复有用的真实信息，增强有关信息的可检测性、最大限度地简化数据，从而改进特征提取、图像分割、匹配和识别的可靠性。">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://smallchao.github.io/upload_images/9210113-9670521d7f3229b8.png">
<meta property="og:image" content="https://smallchao.github.io/upload_images/9210113-3c2858fe68985957.png">
<meta property="og:image" content="https://smallchao.github.io/upload_images/9210113-63344af71e00fc3a.png">
<meta property="og:image" content="https://smallchao.github.io/upload_images/9210113-c30cec730f11ff84.png">
<meta property="og:image" content="https://smallchao.github.io/upload_images/9210113-4101d52baa1e7940.png">
<meta property="og:image" content="https://smallchao.github.io/upload_images/9210113-c6bd903eeb765221.png">
<meta property="og:image" content="https://smallchao.github.io/upload_images/9210113-6e3c4073cfe1f641.png">
<meta property="og:image" content="https://smallchao.github.io/upload_images/9210113-575452e567d015b6.png">
<meta property="og:image" content="https://smallchao.github.io/upload_images/9210113-3e1ae07d73cdacc3.png">
<meta property="og:image" content="https://smallchao.github.io/upload_images/9210113-1e2d93f79496f74f.png">
<meta property="og:image" content="https://smallchao.github.io/upload_images/9210113-6cbbb29b7aa791b2.png">
<meta property="og:updated_time" content="2019-09-01T09:31:07.882Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="图像预处理流程和方法">
<meta name="twitter:description" content="图像分析中，图像质量的好坏直接影响识别算法的设计与效果的精度，因此在图像分析（特征提取、分割、匹配和识别等）前，需要进行预处理。图像预处理的主要目的是消除图像中无关的信息，恢复有用的真实信息，增强有关信息的可检测性、最大限度地简化数据，从而改进特征提取、图像分割、匹配和识别的可靠性。">
<meta name="twitter:image" content="https://smallchao.github.io/upload_images/9210113-9670521d7f3229b8.png">
  <link rel="canonical" href="https://smallchao.github.io/11/8图像预处理流程与方法/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>图像预处理流程和方法 | Byte猫</title>
  <meta name="generator" content="Hexo 3.9.0">
  








  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <div class="container use-motion">
    <div class="headband"></div>
	
	<!--
	<a href="https://github.com/smallchao" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
	-->
	
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Byte猫</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">唤醒数据的价值</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-首页">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-数据结构">
      
    

    <a href="/categories/0" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>数据结构</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-基础应用">
      
    

    <a href="/categories/1" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>基础应用</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-数据存储">
      
    

    <a href="/categories/2" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>数据存储</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-数据可视化">
      
    

    <a href="/categories/3" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>数据可视化</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-数据科学知识">
      
    

    <a href="/categories/4" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>数据科学知识</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-机器学习原理">
      
    

    <a href="/categories/5" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>机器学习原理</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-经典机器学习">
      
    

    <a href="/categories/6" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>经典机器学习</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-半监督学习与强化学习">
      
    

    <a href="/categories/7" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>半监督学习与强化学习</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-神经网络与深度学习">
      
    

    <a href="/categories/8" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>神经网络与深度学习</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-【分支】个性化推荐">
      
    

    <a href="/categories/9" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>【分支】个性化推荐</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-【分支】自然语言处理">
      
    

    <a href="/categories/10" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>【分支】自然语言处理</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-【分支】计算机视觉">
      
    

    <a href="/categories/11" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>【分支】计算机视觉</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-模型工程化">
      
    

    <a href="/categories/12" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>模型工程化</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content page-post-detail">
            

  <div id="posts" class="posts-expand">
    

  <article class="post" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://smallchao.github.io/11/8图像预处理流程与方法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Victor Wu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Byte猫">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">图像预处理流程和方法

          
        </h1>

        <div class="post-meta">
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-09-01 17:31:07" itemprop="dateModified" datetime="2019-09-01T17:31:07+08:00">2019-09-01</time>
              </span>
            
          

          
            <div class="post-description">图像分析中，图像质量的好坏直接影响识别算法的设计与效果的精度，因此在图像分析（特征提取、分割、匹配和识别等）前，需要进行预处理。图像预处理的主要目的是消除图像中无关的信息，恢复有用的真实信息，增强有关信息的可检测性、最大限度地简化数据，从而改进特征提取、图像分割、匹配和识别的可靠性。</div>
          

        </div>
      </header>

    
    
    
	
    <div class="post-body" itemprop="articleBody">

      
	  
	  
        <p>图像分析中，图像质量的好坏直接影响识别算法的设计与效果的精度，因此在图像分析（特征提取、分割、匹配和识别等）前，需要进行预处理。图像预处理的主要目的是消除图像中无关的信息，恢复有用的真实信息，增强有关信息的可检测性、最大限度地简化数据，从而改进特征提取、图像分割、匹配和识别的可靠性。<br>一般的预处理流程为：灰度化-&gt;几何变换-&gt;图像增强</p><a id="more"></a>
<h2 id="一、灰度化"><a href="#一、灰度化" class="headerlink" title="一、灰度化"></a>一、灰度化</h2><p>对彩色图像进行处理时，我们往往需要对三个通道依次进行处理，时间开销将会很大。因此，为了达到提高整个应用系统的处理速度的目的，需要对彩色图像进行灰度化以减少所需处理的数据量。<br>在RGB模型中，如果R=G=B时，则彩色表示一种灰度颜色，其中R=G=B的值叫灰度值，因此，灰度图像每个像素只需一个字节存放灰度值（又称强度值、亮度值），灰度范围为0-255。一般有分量法、最大值法、平均值法、加权平均法四种方法对彩色图像进行灰度化。</p>
<h4 id="加权平均法"><a href="#加权平均法" class="headerlink" title="加权平均法"></a>加权平均法</h4><p>根据重要性及其它指标，将三个分量以不同的权值进行加权平均。由于人眼对绿色的敏感最高，对蓝色敏感最低，因此，按下式对RGB三分量进行加权平均能得到较合理的灰度图像。</p>
<blockquote>
<p>转换算法 L = R * 299/1000 + G * 587/1000+ B * 114/1000</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding = utf-8</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rgb2gray1</span><span class="params">(rgb)</span>:</span></span><br><span class="line">    r, g, b = rgb[:,:,<span class="number">0</span>], rgb[:,:,<span class="number">1</span>], rgb[:,:,<span class="number">2</span>]</span><br><span class="line">    gray = <span class="number">0.2989</span> * r + <span class="number">0.5870</span> * g + <span class="number">0.1140</span> * b</span><br><span class="line">    <span class="keyword">return</span> gray</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rgb2gray2</span><span class="params">(rgb)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> np.dot(rgb[...,:<span class="number">3</span>], [<span class="number">0.299</span>, <span class="number">0.587</span>, <span class="number">0.114</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 图像读取</span></span><br><span class="line">image = Image.open(<span class="string">'timg.jpg'</span>)</span><br><span class="line"><span class="comment">#plt.imshow(image)</span></span><br><span class="line">image = np.array(image)</span><br><span class="line">gray1 = rgb2gray1(image)  </span><br><span class="line">gray2 = rgb2gray2(image)</span><br><span class="line"></span><br><span class="line">plt.imshow(gray1, cmap = <span class="string">'gray'</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">plt.imshow(gray2, cmap = <span class="string">'gray'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h2 id="二、几何变换"><a href="#二、几何变换" class="headerlink" title="二、几何变换"></a>二、几何变换</h2><p>图像几何变换又称为图像空间变换，通过平移、转置、镜像、旋转、缩放等几何变换对采集的图像进行处理，用于改正图像采集系统的系统误差和仪器位置（成像角度、透视关系乃至镜头自身原因）的随机误差。此外，还需要使用灰度插值算法，因为按照这种变换关系进行计算，输出图像的像素可能被映射到输入图像的非整数坐标上。通常采用的方法有最近邻插值、双线性插值和双三次插值。</p>
<h4 id="1、最近邻插值"><a href="#1、最近邻插值" class="headerlink" title="1、最近邻插值"></a>1、最近邻插值</h4><p><img src="/upload_images/9210113-9670521d7f3229b8.png" alt></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding = utf-8</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">最近邻插值图像缩放演示</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> interpolate</span><br><span class="line"><span class="keyword">import</span> pylab <span class="keyword">as</span> pl</span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(x, y)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> (x+y)*np.exp(<span class="number">-5.0</span>*(x**<span class="number">2</span> + y**<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># X-Y轴分为15*15的网格</span></span><br><span class="line">y,x= np.mgrid[<span class="number">-1</span>:<span class="number">1</span>:<span class="number">15j</span>, <span class="number">-1</span>:<span class="number">1</span>:<span class="number">15j</span>]</span><br><span class="line"></span><br><span class="line">fvals = func(x,y) <span class="comment"># 计算每个网格点上的函数值  15*15的值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#三次样条二维插值</span></span><br><span class="line">newfunc = interpolate.interp2d(x, y, fvals, kind=<span class="string">'cubic'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算100*100的网格上的插值</span></span><br><span class="line">xnew = np.linspace(<span class="number">-1</span>,<span class="number">1</span>,<span class="number">100</span>)<span class="comment">#x</span></span><br><span class="line">ynew = np.linspace(<span class="number">-1</span>,<span class="number">1</span>,<span class="number">100</span>)<span class="comment">#y</span></span><br><span class="line">fnew = newfunc(xnew, ynew)<span class="comment">#仅仅是y值   100*100的值</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘图</span></span><br><span class="line"><span class="comment"># 为了更明显地比较插值前后的区别，使用关键字参数interpolation='nearest'</span></span><br><span class="line"><span class="comment"># 关闭imshow()内置的插值运算。</span></span><br><span class="line">pl.subplot(<span class="number">121</span>)</span><br><span class="line">im1=pl.imshow(fvals, extent=[<span class="number">-1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">1</span>], cmap=mpl.cm.hot, interpolation=<span class="string">'nearest'</span>, origin=<span class="string">"lower"</span>)<span class="comment">#pl.cm.jet</span></span><br><span class="line">pl.colorbar(im1)</span><br><span class="line"></span><br><span class="line">pl.subplot(<span class="number">122</span>)</span><br><span class="line">im2=pl.imshow(fnew, extent=[<span class="number">-1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">1</span>], cmap=mpl.cm.hot, interpolation=<span class="string">'nearest'</span>, origin=<span class="string">"lower"</span>)</span><br><span class="line">pl.colorbar(im2)</span><br><span class="line">pl.show()</span><br></pre></td></tr></table></figure>

<h4 id="2、双线性插值"><a href="#2、双线性插值" class="headerlink" title="2、双线性插值"></a>2、双线性插值</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># encoding: utf-8</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">双线性插值图像缩放算法</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bi_linear</span><span class="params">(src, dst, target_size)</span>:</span></span><br><span class="line">    pic = cv.imread(src)       <span class="comment"># 读取输入图像</span></span><br><span class="line">    th, tw = target_size[<span class="number">0</span>], target_size[<span class="number">1</span>]</span><br><span class="line">    emptyImage = np.zeros(target_size, np.uint8)</span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(th):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(tw):</span><br><span class="line">                <span class="comment"># 首先找到在原图中对应的点的(X, Y)坐标</span></span><br><span class="line">                corr_x = (i+<span class="number">0.5</span>)/th*pic.shape[<span class="number">0</span>]<span class="number">-0.5</span></span><br><span class="line">                corr_y = (j+<span class="number">0.5</span>)/tw*pic.shape[<span class="number">1</span>]<span class="number">-0.5</span></span><br><span class="line">                point1 = (math.floor(corr_x), math.floor(corr_y))   <span class="comment"># 左上角的点</span></span><br><span class="line">                point2 = (point1[<span class="number">0</span>], point1[<span class="number">1</span>]+<span class="number">1</span>)</span><br><span class="line">                point3 = (point1[<span class="number">0</span>]+<span class="number">1</span>, point1[<span class="number">1</span>])</span><br><span class="line">                point4 = (point1[<span class="number">0</span>]+<span class="number">1</span>, point1[<span class="number">1</span>]+<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">                fr1 = (point2[<span class="number">1</span>]-corr_y)*pic[point1[<span class="number">0</span>], point1[<span class="number">1</span>], k] + (corr_y-point1[<span class="number">1</span>])*pic[point2[<span class="number">0</span>], point2[<span class="number">1</span>], k]</span><br><span class="line">                fr2 = (point2[<span class="number">1</span>]-corr_y)*pic[point3[<span class="number">0</span>], point3[<span class="number">1</span>], k] + (corr_y-point1[<span class="number">1</span>])*pic[point4[<span class="number">0</span>], point4[<span class="number">1</span>], k]</span><br><span class="line">                emptyImage[i, j, k] = (point3[<span class="number">0</span>]-corr_x)*fr1 + (corr_x-point1[<span class="number">0</span>])*fr2</span><br><span class="line"></span><br><span class="line">    cv.imwrite(dst, emptyImage)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    src = <span class="string">'pic/raw_1.jpg'</span></span><br><span class="line">    dst = <span class="string">'pic/new_1.png'</span></span><br><span class="line">    target_size = (<span class="number">300</span>, <span class="number">200</span>, <span class="number">3</span>)     <span class="comment"># 变换后的图像大小</span></span><br><span class="line"></span><br><span class="line">    bi_linear(src, dst, target_size)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<h2 id="三、图像增强"><a href="#三、图像增强" class="headerlink" title="三、图像增强"></a>三、图像增强</h2><p>增强图像中的有用信息，它可以是一个失真的过程，其目的是要改善图像的视觉效果，针对给定图像的应用场合，有目的地强调图像的整体或局部特性，将原来不清晰的图像变得清晰或强调某些感兴趣的特征，扩大图像中不同物体特征之间的差别，抑制不感兴趣的特征，使之改善图像质量、丰富信息量，加强图像判读和识别效果，满足某些特殊分析的需要。<br>图像增强可分成两大类：频率域法和空间域法。</p>
<h4 id="1、频率域法"><a href="#1、频率域法" class="headerlink" title="1、频率域法"></a>1、频率域法</h4><p>我们知道声音的频率是什么意思。高频是指音调很高的噪音，例如鸟的唧唧声或小提琴的声音。低频是指音调很低的声音，例如深沉的声音或低音鼓。对于声音来说，频率是指声波的振荡速度；振荡通常以周期 (<a href="https://en.wikipedia.org/wiki/Hertz" target="_blank" rel="noopener">Hz</a>) 表示，高音调由高频声波组成。低频和高频声波的示例如下图所示。在 y 轴上是振幅，即声压相对于声音感知音量的测量结果；x 轴是时间。</p>
<p><img src="/upload_images/9210113-3c2858fe68985957.png" alt></p>
<p>同样，图像中的频率是指变化速度。但是图像的变化是什么意思？图像会在空间中变化，高频图像是指强度变化很多的图像。亮度水平从一个像素到另一个像素变化很快。低频图像可能是亮度比较均匀或变化很慢的图像。</p>
<p><img src="/upload_images/9210113-63344af71e00fc3a.png" alt></p>
<p>大多数图像同时具有高频和低频部分。在上图中，丝巾和条纹衬衫部分是高频图像模式；此部分非常快速地从一个亮度变成另一个亮度。在同一图像的更上方，我们看到天空和背景变化很缓慢，称为平滑的低频模式。<br>频率域法是一种间接图像增强算法，把图像看成一种二维信号，对其进行基于二维傅里叶变换的信号增强。采用低通滤波（即只让低频信号通过）法，可去掉图中的噪声；采用高通滤波法，则可增强边缘等高频信号，使模糊的图片变得清晰。</p>
<p><img src="/upload_images/9210113-c30cec730f11ff84.png" alt></p>
<p><strong>图像的傅里叶变换</strong></p>
<p>进行傅立叶变换（FT）后，可以显示图像的频率分量。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding = utf-8</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ft_image</span><span class="params">(norm_image)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">	二维傅里叶变换，接收一个灰度化且归一化的图像返回图像的频谱变换图</span></span><br><span class="line"><span class="string">	'''</span></span><br><span class="line">    f = np.fft.fft2(norm_image)</span><br><span class="line">    fshift = np.fft.fftshift(f)</span><br><span class="line">    frequency_tx = <span class="number">20</span>*np.log(np.abs(fshift))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> frequency_tx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 图像读取并灰度化</span></span><br><span class="line">image_stripes = cv.imread(<span class="string">'images/stripes.jpg'</span>)</span><br><span class="line">image_stripes = cv.cvtColor(image_stripes, cv.COLOR_BGR2RGB)</span><br><span class="line">gray_stripes = cv.cvtColor(image_stripes, cv.COLOR_RGB2GRAY)</span><br><span class="line"></span><br><span class="line">image_solid = cv.imread(<span class="string">'images/pink_solid.jpg'</span>)</span><br><span class="line">image_solid = cv.cvtColor(image_solid, cv.COLOR_BGR2RGB)</span><br><span class="line">gray_solid = cv.cvtColor(image_solid, cv.COLOR_RGB2GRAY)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 为了便于后续处理将颜色空间从 [0,255] 归一化到 [0,1]</span></span><br><span class="line">norm_stripes = gray_stripes/<span class="number">255.0</span></span><br><span class="line">norm_solid = gray_solid/<span class="number">255.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成频谱图</span></span><br><span class="line">f_stripes = ft_image(norm_stripes)</span><br><span class="line">f_solid = ft_image(norm_solid)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可视化</span></span><br><span class="line">f, (ax1,ax2,ax3,ax4) = plt.subplots(<span class="number">1</span>, <span class="number">4</span>, figsize=(<span class="number">20</span>,<span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">ax1.set_title(<span class="string">'original image'</span>)</span><br><span class="line">ax1.imshow(image_stripes)</span><br><span class="line">ax2.set_title(<span class="string">'frequency transform image'</span>)</span><br><span class="line">ax2.imshow(f_stripes, cmap=<span class="string">'gray'</span>)</span><br><span class="line"></span><br><span class="line">ax3.set_title(<span class="string">'original image'</span>)</span><br><span class="line">ax3.imshow(image_solid)</span><br><span class="line">ax4.set_title(<span class="string">'frequency transform image'</span>)</span><br><span class="line">ax4.imshow(f_solid, cmap=<span class="string">'gray'</span>)</span><br></pre></td></tr></table></figure>

<p><img src="/upload_images/9210113-4101d52baa1e7940.png" alt></p>
<blockquote>
<p><strong>图像处理与二维傅里叶变换</strong><br>二维频谱中的每一个点都是一个与之一一对应的二维正弦/余弦波。<br><a href="https://blog.csdn.net/viatorsun/article/details/82387854" target="_blank" rel="noopener">拓展阅读</a></p>
</blockquote>
<h5 id="（1）理想的高-低通滤波"><a href="#（1）理想的高-低通滤波" class="headerlink" title="（1）理想的高/低通滤波"></a>（1）理想的高/低通滤波</h5><p>顾名思义，低通滤波器为：让低频信息通过，过滤高频信息</p>
<p><img src="/upload_images/9210113-c6bd903eeb765221.png" alt></p>
<p>其中，D0表示通带半径，D(u，v)是到频谱中心的距离（欧式距离），计算公式如下：</p>
<p><img src="/upload_images/9210113-6e3c4073cfe1f641.png" alt></p>
<p>M和N表示频谱图像的大小，（M/2，N/2）即为频谱中心<br>tips：高通滤波器与此相反，1减去低通滤波模板即可</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding = utf-8</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_transform_matrix</span><span class="params">(image_arr, d0, ftype)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    构建理想高/低通滤波器</span></span><br><span class="line"><span class="string">    INPUT  -&gt; 图像数组, 通带半径, 类型</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    transfor_matrix = np.zeros(image_arr.shape, dtype=np.float32)  <span class="comment"># 构建滤波器</span></span><br><span class="line">    w, h = transfor_matrix.shape</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(w):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(h):</span><br><span class="line">            distance = np.sqrt((i - w/<span class="number">2</span>)**<span class="number">2</span> + (j - h/<span class="number">2</span>)**<span class="number">2</span>)</span><br><span class="line">            <span class="keyword">if</span> distance &lt; d0:</span><br><span class="line">                transfor_matrix[i, j] = <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                transfor_matrix[i, j] = <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> ftype == <span class="string">'low'</span>:</span><br><span class="line">        <span class="keyword">return</span> transfor_matrix</span><br><span class="line">    <span class="keyword">elif</span> ftype == <span class="string">'high'</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> - transfor_matrix</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 图像灰度化</span></span><br><span class="line">img_arr = np.array(Image.open(<span class="string">'33.jpg'</span>).convert(<span class="string">'L'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将图像从空间域转换到频率域</span></span><br><span class="line">f = np.fft.fft2(img_arr)</span><br><span class="line">fshift = np.fft.fftshift(f)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成低通滤波器</span></span><br><span class="line">F_filter1 = make_transform_matrix(img_arr, <span class="number">30</span>, <span class="string">'low'</span>)</span><br><span class="line"><span class="comment"># 滤波</span></span><br><span class="line">result = fshift*F_filter1</span><br><span class="line"><span class="comment"># 将图像从频率域转换到空间域</span></span><br><span class="line">img_d1 = np.abs(np.fft.ifft2(np.fft.ifftshift(result)))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可视化</span></span><br><span class="line">plt.imshow(array_to_image(img_d1))</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h5 id="（2）高斯高-低通滤波"><a href="#（2）高斯高-低通滤波" class="headerlink" title="（2）高斯高/低通滤波"></a>（2）高斯高/低通滤波</h5><p>Guassian低通滤波器函数为</p>
<p><img src="/upload_images/9210113-575452e567d015b6.png" alt></p>
<p>tips： 1减去低通滤波模板即可得到高通滤波模板</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding = utf-8</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_transform_matrix</span><span class="params">(image_arr, d0, ftype=<span class="string">'low'</span>)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    构建高斯高/低通滤波</span></span><br><span class="line"><span class="string">    INPUT  -&gt; 图像数组, 通带半径, 类型</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    transfor_matrix = np.zeros(image_arr.shape, dtype=np.float32)  <span class="comment"># 构建滤波器</span></span><br><span class="line">    w, h = image_arr.shape</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(w):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(h):</span><br><span class="line">            distance = np.sqrt((i - w/<span class="number">2</span>)**<span class="number">2</span> + (j - h/<span class="number">2</span>)**<span class="number">2</span>)</span><br><span class="line">            transfor_matrix[i, j] = np.e ** (<span class="number">-1</span> * (distance ** <span class="number">2</span> / (<span class="number">2</span> * d0 ** <span class="number">2</span>)))  <span class="comment"># Gaussian滤波函数</span></span><br><span class="line">    <span class="keyword">if</span> ftype == <span class="string">'low'</span>:</span><br><span class="line">        <span class="keyword">return</span> transfor_matrix</span><br><span class="line">    <span class="keyword">elif</span> ftype == <span class="string">'high'</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> - transfor_matrix</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 图像灰度化</span></span><br><span class="line">img_arr = np.array(Image.open(<span class="string">'33.jpg'</span>).convert(<span class="string">'L'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将图像从空间域转换到频率域</span></span><br><span class="line">f = np.fft.fft2(img_arr)</span><br><span class="line">fshift = np.fft.fftshift(f)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成低通滤波器</span></span><br><span class="line">F_filter1 = make_transform_matrix(img_arr, <span class="number">30</span>, <span class="string">'low'</span>)</span><br><span class="line"><span class="comment"># 滤波</span></span><br><span class="line">result = fshift*F_filter1</span><br><span class="line"><span class="comment"># 将图像从频率域转换到空间域</span></span><br><span class="line">img_d1 = np.abs(np.fft.ifft2(np.fft.ifftshift(result)))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可视化</span></span><br><span class="line">plt.imshow(array_to_image(img_d1))</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h4 id="2、空间域法"><a href="#2、空间域法" class="headerlink" title="2、空间域法"></a>2、空间域法</h4><p>空间域法是一种直接图像增强算法，分为点运算算法和邻域去噪算法。<br>点运算算法即灰度变换（伽马变换、对数增强）和直方图修正等。<br>邻域增强算法分为图像平滑和锐化两种。平滑常用算法有均值滤波、中值滤波。锐化常用算法有梯度法（如Roberts梯度法）、算子法（Sobel算子和拉普拉斯算子等）、掩模匹配法、统计差值法等。</p>
<h4 id="（1）点运算算法"><a href="#（1）点运算算法" class="headerlink" title="（1）点运算算法"></a>（1）点运算算法</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> skimage <span class="keyword">import</span> exposure</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">image_gamma_transform</span><span class="params">(pil_im, gamma)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    伽马变换</span></span><br><span class="line"><span class="string">    INPUT  -&gt; 单张图文件</span></span><br><span class="line"><span class="string">    OUTPUT -&gt; 处理后的图文件</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    image_arr = np.array(pil_im)</span><br><span class="line">    image_arr2 = exposure.adjust_gamma(image_arr, gamma)</span><br><span class="line">    <span class="keyword">return</span> array_to_image(image_arr2)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">image_gamma_transform2</span><span class="params">(pil_im, gamma)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    伽马变换2（源码实现）</span></span><br><span class="line"><span class="string">    INPUT  -&gt; 单张图文件</span></span><br><span class="line"><span class="string">    OUTPUT -&gt; 处理后的图文件</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    image_arr = np.array(pil_im)</span><br><span class="line">    image_arr2 = np.power(image_arr / float(np.max(image_arr)), gamma)</span><br><span class="line">    <span class="keyword">return</span> array_to_image(image_arr2*float(np.max(image_arr)))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">image_log_transform</span><span class="params">(pil_im)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    图像对数增强</span></span><br><span class="line"><span class="string">    INPUT  -&gt; 单张图文件</span></span><br><span class="line"><span class="string">    OUTPUT -&gt; 处理后的图文件</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    image_arr = image_to_array(pil_im)</span><br><span class="line">    <span class="keyword">if</span> len(image_arr.shape) == <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">            image_arr[:,:,i] = <span class="number">255</span>/np.log(<span class="number">255</span>+<span class="number">1</span>)*np.log(<span class="number">1</span>+image_arr[:,:,i])</span><br><span class="line">        <span class="keyword">return</span> array_to_image(image_arr)</span><br><span class="line">    <span class="keyword">elif</span> len(image_arr.shape) == <span class="number">2</span>:</span><br><span class="line">        <span class="comment"># image_arr = 255/np.log(np.max(image_arr)+1)*np.log(1+image_arr)</span></span><br><span class="line">        image_arr = <span class="number">255</span>/np.log(<span class="number">255</span>+<span class="number">1</span>)*np.log(<span class="number">1</span>+image_arr)</span><br><span class="line">        <span class="keyword">return</span> array_to_image(image_arr)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">image_histeq</span><span class="params">(pil_im)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    直方图均衡化</span></span><br><span class="line"><span class="string">    INPUT  -&gt; 单张图文件</span></span><br><span class="line"><span class="string">    OUTPUT -&gt; 处理后的图文件</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="comment"># 计算图像的直方图</span></span><br><span class="line">    image_arr = image_to_array(pil_im)</span><br><span class="line">    imhist, bins = np.histogram(image_arr.flatten(), <span class="number">256</span>, normed=<span class="literal">True</span>)</span><br><span class="line">    cdf = imhist.cumsum()   <span class="comment"># 累计分布函数</span></span><br><span class="line">    cdf = <span class="number">255</span>*cdf/cdf[<span class="number">-1</span>]   <span class="comment"># 归一化</span></span><br><span class="line">    <span class="comment"># 使用累计分布函数的线性插值计算新的像素值</span></span><br><span class="line">    image_arr2 = np.interp(image_arr.flatten(), bins[:<span class="number">-1</span>], cdf)</span><br><span class="line">    <span class="keyword">return</span> array_to_image(image_arr2.reshape(image_arr.shape))</span><br></pre></td></tr></table></figure>

<h4 id="（2）邻域增强算法之平滑"><a href="#（2）邻域增强算法之平滑" class="headerlink" title="（2）邻域增强算法之平滑"></a>（2）邻域增强算法之平滑</h4><h5 id="均值滤波"><a href="#均值滤波" class="headerlink" title="均值滤波"></a>均值滤波</h5><p>也称线性滤波，主要采用邻域平均法。</p>
<p><img src="/upload_images/9210113-3e1ae07d73cdacc3.png" alt></p>
<p>均值滤波的核心思想是其将整个图像看成是由很多灰度恒定的小块组成，相邻像素间相关性很强（任意一点的像素值，都是周围N*M个像素值的均值），但噪声具有统计独立性。通过均值滤波减少了灰度的突变。</p>
<p><img src="/upload_images/9210113-1e2d93f79496f74f.png" alt></p>
<p>均值滤波可以加上两个参数，即迭代次数，Kernel数据大小。一个相同的Kernel，但是多次迭代就会效果越来越好。同样，迭代次数相同，Kernel矩阵越大，均值滤波的效果就越明显。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.signal <span class="keyword">import</span> convolve2d</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">image_mean_filter</span><span class="params">(pil_im)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    均值滤波</span></span><br><span class="line"><span class="string">    INPUT  -&gt; 单张图文件</span></span><br><span class="line"><span class="string">    OUTPUT -&gt; 处理后的图文件</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    image_arr = image_to_array(pil_im)</span><br><span class="line">    dst_arr = np.zeros_like(image_arr)</span><br><span class="line">    <span class="comment"># 卷积核-均值算子</span></span><br><span class="line">    mean_operator = np.array([[<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>], </span><br><span class="line">                            [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>], </span><br><span class="line">                            [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>]])/<span class="number">9</span></span><br><span class="line">    <span class="keyword">if</span> len(image_arr.shape) == <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">            dst_arr[:,:,i] = convolve2d(image_arr[:,:,i], mean_operator, mode=<span class="string">"same"</span>)</span><br><span class="line">    <span class="keyword">elif</span> len(image_arr.shape) == <span class="number">2</span>:</span><br><span class="line">        dst_arr = convolve2d(image_arr, mean_operator, mode=<span class="string">"same"</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> array_to_image(dst_arr)</span><br></pre></td></tr></table></figure>

<h5 id="中值滤波"><a href="#中值滤波" class="headerlink" title="中值滤波"></a>中值滤波</h5><p>中值滤波也是消除图像噪声最常见的手段之一，特别是消除椒盐噪声，中值滤波的效果要比均值滤波更好。中值滤波是跟均值滤波唯一不同是，不是用均值来替换中心每个像素，而是将周围像素和中心像素排序以后，取中值。</p>
<p><img src="/upload_images/9210113-6cbbb29b7aa791b2.png" alt></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.ndimage <span class="keyword">import</span> filters</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">image_medium_filter</span><span class="params">(image_arr, K=<span class="number">5</span>)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    中值滤波</span></span><br><span class="line"><span class="string">    中值平滑只对特别尖锐的信号平滑</span></span><br><span class="line"><span class="string">    INPUT  -&gt; 图像数组</span></span><br><span class="line"><span class="string">    OUTPUT -&gt; 去噪后的图像数组</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="keyword">if</span> len(image_arr.shape) == <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">           image_arr[:,:,i] = filters.median_filter(image_arr[:,:,i], K)</span><br><span class="line">        <span class="keyword">return</span> image_arr   </span><br><span class="line">    <span class="keyword">elif</span> len(image_arr.shape) == <span class="number">2</span>:</span><br><span class="line">        image_arr = filters.medianBlur(image_arr, K)</span><br><span class="line">        <span class="keyword">return</span> image_arr</span><br></pre></td></tr></table></figure>

<h4 id="（3）邻域增强算法之锐化"><a href="#（3）邻域增强算法之锐化" class="headerlink" title="（3）邻域增强算法之锐化"></a>（3）邻域增强算法之锐化</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.signal <span class="keyword">import</span> convolve2d</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">image_laplace_filter</span><span class="params">(pil_im)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    拉普拉斯算子增强</span></span><br><span class="line"><span class="string">    INPUT  -&gt; 单张图文件</span></span><br><span class="line"><span class="string">    OUTPUT -&gt; 处理后的图文件</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    image_arr = np.array(pil_im)</span><br><span class="line">    dst_arr = np.zeros_like(image_arr)</span><br><span class="line">    filter_arr = dst_arr</span><br><span class="line">    <span class="comment"># 卷积核-拉普拉斯算子</span></span><br><span class="line">    laplace_operator = np.array([[<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>], </span><br><span class="line">                                [<span class="number">-1</span>, <span class="number">4</span>, <span class="number">-1</span>], </span><br><span class="line">                                [<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>]])</span><br><span class="line">    <span class="keyword">if</span> len(image_arr.shape) == <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">            dst_arr[:,:,i] = convolve2d(image_arr[:,:,i], laplace_operator, mode=<span class="string">"same"</span>)</span><br><span class="line">            filter_arr[:,:,i] = image_Gaussian_filter(dst_arr[:,:,i], <span class="number">5</span>)</span><br><span class="line">    <span class="keyword">elif</span> len(image_arr.shape) == <span class="number">2</span>:</span><br><span class="line">        dst_arr = convolve2d(image_arr, laplace_operator, mode=<span class="string">"same"</span>)</span><br><span class="line">        filter_arr = image_Gaussian_filter(dst_arr, <span class="number">5</span>)</span><br><span class="line">    dst_arr = image_arr + filter_arr</span><br><span class="line">    dst_arr = dst_arr / <span class="number">255.0</span></span><br><span class="line">    <span class="comment"># 饱和处理</span></span><br><span class="line">    mask_1 = dst_arr  &lt; <span class="number">0</span> </span><br><span class="line">    mask_2 = dst_arr  &gt; <span class="number">1</span></span><br><span class="line">    dst_arr = dst_arr * (<span class="number">1</span>-mask_1)</span><br><span class="line">    dst_arr = dst_arr * (<span class="number">1</span>-mask_2) + mask_2</span><br><span class="line">    <span class="keyword">return</span> array_to_image(dst_arr*<span class="number">255</span>)</span><br></pre></td></tr></table></figure>


    </div>
	

    
    
    
        
      

      <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/11/7用感知哈希算法找到相似图像/" rel="next" title="用感知哈希算法找到相似图像">
                  <i class="fa fa-chevron-left"></i> 用感知哈希算法找到相似图像
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/11/9明暗检测与亮度调节算法/" rel="prev" title="明暗检测与亮度调节算法">
                  明暗检测与亮度调节算法 <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

	
      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc" data-target="post-toc-wrap">
          文章目录
        </li>
        <li class="sidebar-nav-overview" data-target="site-overview-wrap">
          站点概览
        </li>
      </ul>
	 

      <!--noindex-->
	  
      <div class="post-toc-wrap sidebar-panel">
		<!--
		-->
      </div>
	  
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/images/avatar.png"
      alt="Victor Wu">
  <p class="site-author-name" itemprop="name">Victor Wu</p>
  <div class="site-description motion-element" itemprop="description"></div>
</div>
	
  <nav class="site-state motion-element">
  <!--
      <div class="site-state-item site-state-posts">
        
          <a href="/archives">
        
          <span class="site-state-item-count">122</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
	-->
  </nav>



        </div>
      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Victor Wu</span>
</div>

        












        
      </div>
    </footer>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  </div>

  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.3.0"></script><script src="/js/motion.js?v=7.3.0"></script>
<script src="/js/schemes/pisces.js?v=7.3.0"></script>

<script src="/js/next-boot.js?v=7.3.0"></script>



  





















  

  

  

  


  
  <script src="/js/post-details.js?v=7.3.0"></script>


</body>
</html>
